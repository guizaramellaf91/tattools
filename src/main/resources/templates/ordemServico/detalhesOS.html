<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<link type="text/css" rel="stylesheet" href="../css/materialize.min.css" media="screen,projection" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta charset="ISO-8859-1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<title>Tattools - Detalhes OS</title>
</head>
<div th:replace="fragments/header :: header">&nbsp;</div>
<body th:background="@{/img/backgroundall.png}">
<div th:each="ordemServico : ${ordemServico}" class="container">
  <br>
  <a th:if="${usuarioLogado.login != null}" th:href="@{/ordemServico?pageSize={1}&page={2}(1=${pageSizeNavi},2=${pageNavi})}" class="waves-effect waves-light grey darken-3 lighten-1 btn-small"><i class="material-icons left">arrow_back</i>Voltar</a>
  <a th:unless="${usuarioLogado.login != null}" th:href=@{/ordemServico} class="waves-effect waves-light grey darken-3 lighten-1 btn-small"><i class="material-icons left">arrow_back</i>Voltar</a>
  <a th:if="${usuarioLogado.login ne null && usuarioLogado.tipoUsuario.nomeTipo eq 'STUDIO'}" th:href=@{#modalInativarOS} class="waves-effect waves-light grey darken-3 lighten-1 btn-small modal-trigger"><i class="material-icons left">delete</i>Inativar OS</a>
  <br><br>  
    <form id="formDetalhesOS" class="col s12" method="post">
      <div class="row">
        <input id="ordemServicoId" type="hidden" th:field="${ordemServico.ordemServicoId}"/>
        <div class="input-field col s2">
          <input style="font-size: 12px;" id="dataCadastro" name="nomeCliente" th:value="${#dates.format(ordemServico.dataCadastro, 'dd/MM/yyyy')}" type="text" required disabled>
          <label for="dataCadastro">Cadastro</label>
        </div>
        <div class="input-field col s2">
          <input style="font-size: 12px;" id="dataAlteracao" name="nomeCliente" th:value="${#dates.format(ordemServico.dataAlteracao, 'dd/MM/yyyy HH:mm')}" type="text" required disabled>
          <label for="dataAlteracao">Altera&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s2">
          <input style="font-size: 12px; font-weight: bold;" id="descricao" name="descricao" th:value="${ordemServico.ordemServicoId}" type="text" required disabled>
          <label for="nome">N&deg; OS</label>
        </div>
        <div class="input-field col s4">
          <input style="font-size: 12px; font-weight: bold;" id="nomeCliente" name="nomeCliente" th:value="${ordemServico.cliente.nome}" type="text" required disabled>
          <label for="nomeCliente">Cliente</label>
        </div>
        <div class="input-field col s2">
          <input style="font-size: 12px; font-weight: bold;" id="celularCliente" name="celularCliente" th:value="${ordemServico.cliente.celular ne '' ? ordemServico.cliente.celular : 'N/A'}" type="text" required disabled>
          <label for="celularCliente">Celular Cliente</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 12px; font-weight: bold;" id="nomeCliente" name="nomeCliente" th:value="${ordemServico.usuario.nome + ' (' + ordemServico.usuario.login + ')'}" type="text" required disabled>
          <label for="nomeCliente">Gerador por</label>
        </div>
        <div class="input-field col s3">
          <input oninput="this.value = this.value.toUpperCase()" style="font-size: 12px; font-weight: bold;" id="descricao" name="descricao" th:value="${ordemServico.descricao}" type="text" required disabled>
          <label for="nome">Descri&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s4">
          <input style="font-size: 12px; font-weight: bold;" id="observacao" name="observacao" th:value="${ordemServico.observacao eq '' ? 'N/A' : ordemServico.observacao}" type="text" required disabled>
          <label for="observacao">Observa&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s2">
          <input style="font-size: 14px; font-weight: bold;" id="observacao" name="observacao" th:value="${ordemServico.valorTotal}" type="text" disabled>
          <label for="observacao">Valor Total R$</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 14px; font-weight: bold;" id="produto" name="produto" th:value="${ordemServico.produto eq null ? 'N/A' : ordemServico.produto.descricao}" type="text" disabled>
          <label for="observacao">Produto</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 14px; font-weight: bold;" id="observacao" name="observacao" th:value="${ordemServico.valorProduto}" type="text" disabled>
          <label for="observacao">Valor Produto</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 14px; font-weight: bold;" id="servico" name="servico" th:value="${ordemServico.servico eq null ? 'N/A' : ordemServico.servico.descricao}" type="text" disabled>
          <label for="observacao">Servi&ccedil;o</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 14px; font-weight: bold;" id="observacao" name="observacao" th:value="${ordemServico.valorServico}" type="text" disabled>
          <label for="observacao">Valor Servi&ccedil;o</label>
        </div>
        <br>
	  </div>
	  <a id="btnFinanceiro" th:href="${(#mvc.url('GFC#detalhesGestaoFinanceiraOS').arg(0, ordemServico.ordemServicoId)).build()}" class="waves-effect waves-light pulse grey darken-3 lighten-1 btn-small"><i class="material-icons left">attach_money</i>Financeiro</a>	     
      <a id="btnImprimir" th:href="${(#mvc.url('OSC#imprimirOS').arg(0, ordemServico.ordemServicoId)).build()}" target="_blank" class="waves-effect waves-light grey darken-3 lighten-1 btn-small"><i class="material-icons left">filter_list</i>Imprimir</a>    
    </form>  
</div>     
     
<div id="modalInativarOS" class="modal">
  <div class="modal-content" align="center">
    <h4>Inativar OS</h4>
    <p style="font-size: 14px;" th:text="'Ol&aacute; ' + ${usuarioLogado.nome} + ', deseja realmente inativar o registro?'"></p>
    <a th:href="${(#mvc.url('OSC#inativarOS').arg(0, ordemServico.ordemServicoId)).build()}" class="modal-close waves-effect waves-green btn-flat">Sim</a>
    <a class="modal-close waves-effect waves-red btn-flat">N&atilde;o</a>
  </div>
</div>

<script type="text/javascript" src="../js/materialize.min.js"></script>
<script>
$(document).ready(function(){
	$('.modal').modal();
	$('.dropdown-trigger').dropdown();
});

$("#btnAlterar").click(function() {
	$('#formDetalhesOS').submit();
});
</script>
</body>
<div th:replace="fragments/footer :: footer">&nbsp;</div>
</html>