<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-155041893-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155041893-1');
</script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<link type="text/css" rel="stylesheet" href="../css/materialize.min.css" media="screen,projection" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta charset="ISO-8859-1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<title>Tattools - Dados do Servi&ccedil;o</title>
</head>
<div th:replace="fragments/header :: header">&nbsp;</div>
<body th:background="@{/img/backgroundall.png}">
<div class="container">
  <br>
  <a th:href=@{/produtoServico} class="waves-effect waves-light grey darken-1 lighten-1 btn-small"><i class="material-icons left">arrow_back</i>Voltar</a>
  <br><br><br>
    <form class="col s12">
      <div class="row">
      	<div class="input-field col s3">
          <input style="font-size: 12px; font-weight: bold;" id="dataCadastro" name="dataCadastro" th:value="${#dates.format(servico.dataCadastro, 'dd/MM/yyyy')}" type="text" required disabled>
          <label for="descricao">Data de Cadastro</label>
        </div>
        <div class="input-field col s3">
          <input style="font-size: 12px; font-weight: bold;" id="dataAlteracao" name="dataAlteracao" th:value="${#dates.format(servico.dataAlteracao, 'dd/MM/yyyy HH:mm:ss')}" type="text" required disabled>
          <label for="descricao">Data de Altera&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s6">
          <input style="font-size: 12px; font-weight: bold;" id="descricao" name="descricao" th:value="${servico.descricao}" type="text" required>
          <label for="descricao">Descri&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s10">
          <input style="font-size: 12px; font-weight: bold;" id="observacao" name="observacao" th:value="${servico.observacao}" type="text" required>
          <label for="descricao">Observa&ccedil;&atilde;o</label>
        </div>
        <div class="input-field col s2">
			<div class="switch">
				<label>Inativo<input type="checkbox" id="ativo" name="ativo" th:checked="${servico.ativo}">
				<span class="lever"></span>Ativo</label>
			</div>
		</div>
	  </div>   
    </form>       
    <a href="#" id="btnAlterarServico" class="waves-effect waves-light grey darken-1 lighten-1 btn-small modal-trigger"><i class="material-icons left">edit</i>Alterar</a>
</div>     
   
<script type="text/javascript" src="../js/materialize.min.js"></script>
<script>
$(document).ready(function(){
	$('.modal').modal();
	$('.dropdown-trigger').dropdown();
});

$('#btnAlterarServico').click(function() {

	if ($('#ativo').is(':checked')) {
		$('#ativo').val(true);
	} else {
		$('#ativo').val(false);
	}
		
	$.ajax({
		type : 'GET',
		url : '../alterarServico/',
		data : {
			'servicoId' : [[${servico.servicoId}]],
			'ativo' : $('#ativo').val(),
			'dataCadastro' : $('#dataCadastro').val(),
			'dataAlteracao' : $('#dataAlteracao').val(),
			'descricao' : $('#descricao').val(),
			'observacao' : $('#observacao').val(),		
		},
		success : function(data) {
			location.href = '../produtoServico';
		},
		error : function() {
			alert("Ocorreu um erro ao cadastrar o servico.");
			location.href = '../produtoServico';
		}
	});
});
</script>
</body>
<div th:replace="fragments/footer :: footer">&nbsp;</div>
</html>